(this.webpackJsonpregistrationapp=this.webpackJsonpregistrationapp||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(8),s=a(1),i=a.n(s),c=a(16),r=a.n(c),o=(a(30),a(11)),h=a(12),l=a(14),d=a(13),u=a.p+"static/media/flag.63e09fa5.jpg",p=a(2),j=a(7),m=(a(31),a(0)),b=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={credentials:{username:"",password:"",person:{user_panchayath:""}},siginError:!1,mytoken:"",hidden:!0},e.login=function(t){console.log(e.state.credentials),fetch("http://127.0.0.1:8000/auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state.credentials)}).then((function(t){return console.log(t),200===t.status&&e.props.setfetchData(!0),t.json()})).then((function(t){void 0===t.token?e.setState({siginError:!0}):e.setState({siginError:!1}),e.setState({mytoken:t.token}),e.props.userLogin(t.token),e.props.loginUsername(e.state.credentials.username),e.props.userPanchayath(e.state.credentials.person.user_panchayath)})).catch((function(t){return e.setState({siginError:!0})}))},e.inputChanged=function(t){var a=e.state.credentials;"user_panchayath"===t.target.name?a.person.user_panchayath=t.target.value:a[t.target.name]=t.target.value;e.setState({credentials:a})},e.eye=function(){e.setState({hidden:!e.state.hidden})},e}return Object(h.a)(a,[{key:"render",value:function(){if(this.state.mytoken)return Object(m.jsx)(p.a,{to:"/home"});var e=Object(m.jsx)("p",{className:"invalid-id",children:"\xa0"});return this.state.siginError&&(e=Object(m.jsx)("p",{className:"invalid-id",children:"**invalid user name or passowrd"})),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"imgcontainer",children:Object(m.jsx)("img",{className:"imgOne",src:u})}),Object(m.jsxs)("div",{className:"login-container",children:[Object(m.jsx)("h1",{children:"Log in"}),Object(m.jsx)("h6",{children:"Login to IMIT messenger"}),e,Object(m.jsxs)("div",{className:"login-form",children:[Object(m.jsx)("input",{className:"login-form-input",id:"txt-input",type:"text",placeholder:"Email address",name:"username",value:this.state.credentials.username,onChange:this.inputChanged,required:!0}),Object(m.jsx)("br",{}),Object(m.jsxs)("select",{id:"select-input",className:"form-select",name:"user_panchayath",value:this.state.credentials.person.user_panchayath,onChange:this.inputChanged,children:[Object(m.jsx)("option",{value:"",disabled:!0,defaultValue:!0,children:"Select Panchayath"}),Object(m.jsx)("option",{value:"panch1",children:"Panchayath 1"}),Object(m.jsx)("option",{value:"panch2",children:"Panchayath 2"}),Object(m.jsx)("option",{value:"panch3",children:"Panchayath 3"}),Object(m.jsx)("option",{value:"panch4",children:"Panchayath 4"})]}),Object(m.jsx)("input",{className:"login-form-input",type:this.state.hidden?"password":"text",placeholder:"Password",id:"pwd",name:"password",value:this.state.credentials.password,onChange:this.inputChanged,required:!0}),Object(m.jsx)("span",{children:Object(m.jsx)("i",{class:this.state.hidden?"fa fa-eye":"fa fa-eye-slash","aria-hidden":"true",type:"button",id:this.state.hidden?"eye":"eye-red",onClick:this.eye})}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"form-checkbox",type:"checkbox",id:"rememberpwd"}),Object(m.jsx)("label",{className:"form-checkbox-label",htmlFor:"rememberpwd",children:"Remember password"}),Object(m.jsx)("br",{}),Object(m.jsxs)("button",{className:"log-in btn-login",onClick:this.login,children:["SIGN IN"," "]}),Object(m.jsx)("a",{href:"#",children:"Forgot password?"}),Object(m.jsx)(j.b,{to:"/register",className:"link-register",children:"Register"})]})]})]})}}]),a}(s.Component),O=a.p+"static/media/flag.63e09fa5.jpg",g=a.p+"static/media/Green-Check.730fdaab.png",f=(a(38),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={credentials:{email:"",password:"",mobile_no:"",person:{user_username:"",user_wanumber:"",user_panchayath:"",user_district:""}},confirm_password:"",registerSucess:!1,mailInvalid:!1,allusers:[{id:"na",email:"na",mobile_no:"na",person:{user_username:"na",user_wanumber:"na",user_panchayath:"na",user_district:"na"}}]},e.register=function(t){e.state.confirm_password===e.state.credentials.password&&fetch("http://127.0.0.1:8000/api/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state.credentials)}).then((function(e){return e.json()})).then((function(t){console.log(t),t.email==["Enter a valid email address."]&&e.setState({mailinValid:!0}),t.id&&e.setState({credentials:{email:"",password:"",mobile_no:"",person:{user_username:"",user_wanumber:"",user_panchayath:"",user_district:""}},confirm_password:"",registerSucess:!0,mailInvalid:!1})})).catch((function(e){return console.error(e)}))},e.inputChanged=function(t){var a=e.state.credentials;t.target.name,a.person[t.target.name]=t.target.value,t.target.name,a[t.target.name]=t.target.value,"confirm_password"===t.target.name&&(e.state.confirm_password=t.target.value),e.setState({credentials:a})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://127.0.0.1:8000/api/users/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.setState({allusers:t})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this,t=!1,a=!1;t=!!this.state.allusers.find((function(t){return t.person.user_username===e.state.credentials.person.user_username}));var n=Object(m.jsx)("p",{className:"register-invalid-id",children:"\xa0"});return this.state.confirm_password!==this.state.credentials.password&&(a=!0,n=Object(m.jsx)("p",{className:"register-invalid-id",children:"**Password does not match"})),this.state.registerSucess&&(n=Object(m.jsx)("p",{className:"register-valid-id",children:"**Registered successfully"})),t&&(n=Object(m.jsx)("p",{className:"register-invalid-id",children:"**Username already exist"})),this.state.registerSucess&&setTimeout((function(){return Object(m.jsx)(p.a,{to:"/"})}),2e3),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"imgcontainer",children:Object(m.jsx)("img",{className:"imgOne",src:O})}),Object(m.jsx)("div",{className:"register-container",children:this.state.registerSucess?Object(m.jsxs)("div",{className:"resgiter-success",children:[Object(m.jsx)("img",{className:"imageTwo",src:g}),Object(m.jsx)("h2",{children:"Registered successfully"}),Object(m.jsx)("br",{}),Object(m.jsxs)(j.b,{to:"/",className:"resgiter-success-login",children:[" ","Login"]})]}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Register"}),Object(m.jsx)("h6",{children:"Register to IMIT messenger"}),n]}),Object(m.jsxs)("div",{className:"register-form",children:[Object(m.jsx)("input",{className:t?"register-form-input-invalid":"register-form-input",id:"username-input",type:"text",placeholder:"User Name",name:"user_username",value:this.state.credentials.person.user_username,onChange:this.inputChanged,required:!0}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"register-form-input",id:"user_email-input",type:"email",placeholder:"Email address",name:"email",value:this.state.credentials.email,onChange:this.inputChanged,required:!0}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"register-form-input",id:"user_phnumber-input",type:"tel",placeholder:"Phone Number",name:"mobile_no",value:this.state.credentials.mobile_no,onChange:this.inputChanged,required:!0}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"register-form-input",id:"user_wanumber-input",type:"tel",placeholder:"Whatsapp Number",name:"user_wanumber",value:this.state.credentials.person.user_wanumber,onChange:this.inputChanged,required:!0}),Object(m.jsx)("br",{}),Object(m.jsxs)("select",{className:"register-form-select",name:"user_panchayath",value:this.state.credentials.person.user_panchayath,onChange:this.inputChanged,children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"Select Panchayath"}),Object(m.jsx)("option",{value:"panch1",children:"Panchayath 1"}),Object(m.jsx)("option",{value:"panch2",children:"Panchayath 2"}),Object(m.jsx)("option",{value:"panch3",children:"Panchayath 3"}),Object(m.jsx)("option",{value:"panch4",children:"Panchayath 4"})]}),Object(m.jsxs)("select",{className:"register-form-select",name:"user_district",value:this.state.credentials.person.user_district,onChange:this.inputChanged,children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"Select District"}),Object(m.jsx)("option",{value:"district1",children:"District 1"}),Object(m.jsx)("option",{value:"district2",children:"District 2"}),Object(m.jsx)("option",{value:"district3",children:"District 3"}),Object(m.jsx)("option",{value:"district4",children:"District 4"})]}),Object(m.jsx)("input",{className:a?"register-form-input-invalid":"register-form-input",type:"password",placeholder:"Password",id:"pwd",name:"password",value:this.state.credentials.password,onChange:this.inputChanged,required:!0}),Object(m.jsx)("input",{className:a?"register-form-input-invalid":"register-form-input",type:"password",placeholder:"Confirm Password",id:"cnfm_pwd",name:"confirm_password",value:this.state.confirm_password,onChange:this.inputChanged,required:!0}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{className:"form-checkbox",type:"checkbox",id:"rememberpwd"}),Object(m.jsx)("label",{className:"form-checkbox-label",htmlFor:"rememberpwd",children:"Remember password"}),Object(m.jsxs)("button",{className:"btn-register",onClick:this.register,children:["REGISTER"," "]}),Object(m.jsx)(j.b,{to:"/",className:"link-register",children:"Already registered? Login"})]})]})})]})}}]),a}(s.Component)),y=a(9),x=(a(39),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).loadPanchayath=function(){fetch("http://127.0.0.1:8000/api/panchayath/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(n.state.token)},body:JSON.stringify(n.state.credentials)}).then((function(e){return e.json()})).then((function(e){return n.setState({panchayath:e.find((function(e){return e.user_panchayath===n.state.userpanchayath}))})})).catch((function(e){return console.error(e)}))},n.inputChanged=function(e){var t=n.state.panchayath;t[e.target.name]=e.target.value,n.setState({panchayath:t})},n.editDatabtn=function(){n.setState({editDataStatus:!0})},n.updateDatabtn=function(){fetch("http://127.0.0.1:8000/api/panchayath/".concat(n.state.panchayath.id,"/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(n.state.token)},body:JSON.stringify(n.state.panchayath)}).then((function(e){return n.setState({editDataStatus:!1}),console.log(e),e.json()}))},n.state={panchayath:{id:"",panchayath_district:" ",panchayath_name:" ",panchayath_population:" ",panchayath_state:" ",user_panchayath:" "},person:{user_username:"",user_wanumber:"",user_panchayath:"",user_district:"",user_profile_pic:""},token:n.props.token,userpanchayath:n.props.userpanchayath,rendered:!1,activeUsername:n.props.activeUsername,editDataStatus:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://127.0.0.1:8000/api/panchayath/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(this.state.token)},body:JSON.stringify(this.state.credentials)}).then((function(e){return e.json()})).then((function(t){return e.setState({panchayath:t.find((function(t){return t.user_panchayath===e.state.userpanchayath}))})})).catch((function(e){return console.error(e)})),fetch("http://127.0.0.1:8000/api/users/",{method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.credentials)}).then((function(e){return e.json()})).then((function(t){return e.setState({person:t.find((function(t){return t.email===e.state.activeUsername})).person})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e,t;return this.props.fetchData?(console.log(this.props.fetchData),console.log(this.state.person),window.location.reload(),this.props.stopfetch()):console.log(this.props.fetchData),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"nav-container",children:[Object(m.jsxs)("h1",{children:["Hi ,"," ","undefined"!==this.state.token?this.state.person.user_username:"user"]}),"undefined"!==this.state.token?Object(m.jsx)("button",{onClick:this.props.logOutBtn,className:"btn-logout",children:"Log out"}):Object(m.jsx)("button",{onClick:this.props.logIn,className:"btn-logout",children:"Log in"})," "]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"column sidebar",children:[Object(m.jsx)("img",{src:"https://cdn.business2community.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640.png",alt:"profile"}),Object(m.jsx)("h2",{children:" My Details"}),Object(m.jsx)("hr",{}),Object(m.jsxs)("h5",{className:"details",children:["Username : ",this.state.person.user_username]}),Object(m.jsxs)("h5",{className:"details",children:["Email : ",this.state.activeUsername]}),Object(m.jsxs)("h5",{className:"details",children:["Mobile : ",this.state.person.user_wanumber]})]}),Object(m.jsx)("div",{className:"users-container column",children:this.state.editDataStatus?Object(m.jsxs)("div",{className:"panchayath-container",children:[Object(m.jsxs)("div",{className:"",children:[Object(m.jsx)("label",{htmlFor:"a",children:"Panchayath : "}),Object(m.jsx)("input",{className:"edit-form-input",id:"a",type:"text",placeholder:"Panchayath",name:"panchayath_name",value:this.state.panchayath.panchayath_name,onChange:this.inputChanged}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"b",children:"District : "}),Object(m.jsx)("input",{className:"edit-form-input",id:"b",type:"text",placeholder:"District",name:"panchayath_district",value:this.state.panchayath.panchayath_district,onChange:this.inputChanged}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"c",children:"Population : "}),Object(m.jsx)("input",(e={className:"edit-form-input",id:"c",type:"text",placeholder:"User Name"},Object(y.a)(e,"placeholder","Population"),Object(y.a)(e,"name","panchayath_population"),Object(y.a)(e,"value",this.state.panchayath.panchayath_population),Object(y.a)(e,"onChange",this.inputChanged),e)),Object(m.jsx)("br",{}),Object(m.jsxs)("label",{htmlFor:"d",id:"edit-label",children:["State :"," "]}),Object(m.jsx)("input",(t={className:"edit-form-input",id:"d",type:"text",placeholder:"User Name"},Object(y.a)(t,"placeholder","State"),Object(y.a)(t,"name","panchayath_state"),Object(y.a)(t,"value",this.state.panchayath.panchayath_state),Object(y.a)(t,"onChange",this.inputChanged),t))]}),Object(m.jsx)("button",{className:"btn-update",onClick:this.updateDatabtn,children:"Update"})]}):Object(m.jsxs)("div",{className:"panchayath-container",children:[Object(m.jsxs)("h4",{children:["Panchayath :",this.state.panchayath.panchayath_name]},"1"),Object(m.jsxs)("h4",{children:["District : ",this.state.panchayath.panchayath_district]},"2"),Object(m.jsxs)("h4",{children:["Population : ",this.state.panchayath.panchayath_population]},"3"),Object(m.jsxs)("h4",{children:["State : ",this.state.panchayath.panchayath_state]},"4"),Object(m.jsx)("button",{className:"btn-edit",onClick:this.editDatabtn,children:"Edit"})]})})]}),Object(m.jsx)("div",{className:"nav-container"})]})}}]),a}(s.Component));var v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,44)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))},_=a(42),N=a(43);function C(){var e=Object(_.a)(["mytoken"]),t=Object(n.a)(e,2),a=t[0],i=t[1],c=Object(_.a)(["panchayath"]),r=Object(n.a)(c,2),o=(r[0],r[1]),h=Object(_.a)(["username"]),l=Object(n.a)(h,2),d=(l[0],l[1]),u=Object(_.a)(["fetchdata"]),j=Object(n.a)(u,2),O=(j[0],j[1]);Object(p.g)();console.log(a.mytoken);Object(s.useEffect)((function(){"undefined"!=a.mytoken&&a.mytoken}),[a]);return Object(m.jsx)("div",{children:Object(m.jsx)(b,{userLogin:function(e){i("mytoken",e)},userPanchayath:function(e){o("panchayath",e)},loginUsername:function(e){d("username",e)},setfetchData:function(e){O("fetchdata",e)}})})}function w(){var e=Object(_.a)(["mytoken"]),t=Object(n.a)(e,2),a=t[0],s=t[1],i=Object(_.a)(["panchayath"]),c=Object(n.a)(i,2),r=c[0],o=c[1],h=Object(_.a)(["username"]),l=Object(n.a)(h,2),d=l[0],u=l[1],j=Object(_.a)(["fetchdata"]),b=Object(n.a)(j,3),O=b[0],g=(b[1],b[2]),f=Object(p.g)();return Object(m.jsx)("div",{children:Object(m.jsx)(x,{token:a.mytoken,userpanchayath:r.panchayath,activeUsername:d.username,fetchData:O.fetchdata,logOutBtn:function(){s(["mytoken"]),o(["panchayath"]),u(["username"]),f.push("")},logIn:function(){f.push("")},stopfetch:function(){g(["fetchdata"])}})})}function k(){var e=Object(_.a)(["mytoken"]);Object(n.a)(e,1)[0];return Object(m.jsx)(N.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"/register",component:f}),Object(m.jsx)(p.b,{path:"/home",component:w}),Object(m.jsx)(p.b,{exact:!0,path:"",component:C})]})})})}r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),v()}},[[40,1,2]]]);
//# sourceMappingURL=main.b24a2235.chunk.js.map